<main>
  <section class="section">
    <div class="post-main-container">
      <div class="post-content">
        @if (!postNotFound) {
          <ng-container>
            <app-post-detail [post]="post" [content]="getContentByLevel()"></app-post-detail>
          </ng-container>
        } @else {
          <ng-template>
            <div class="content-block">
              <div class="error">
                <h2>{{ 'post.notFound' | translate }}</h2>
                <p>{{ 'post.notFoundMessage' | translate }}</p>
                <button mat-raised-button color="primary" routerLink="/">{{ 'common.goHome' | translate }}</button>
              </div>
            </div>
          </ng-template>
        }
      </div>
      <aside class="post-sidebar">
        <div class="post-detail-function-block">
          <mat-form-field appearance="outline" class="level-select">
            <mat-label>{{ 'post.level' | translate }}</mat-label>
            <mat-select [value]="selectedLevel" (selectionChange)="onLevelChange($event.value)">
              @for (level of levels; track level) {
                <mat-option [value]="level">{{ level }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
        <h3 class="text-title">{{ 'posts.latestNews' | translate }}</h3>
        <div class="latest-news-list">
          @for (news of latestNews; track news) {
            <app-post-card [post]="news"></app-post-card>
          }
        </div>
      </aside>
    </div>
  </section>
  <section class="section subscribe-section">
    <app-subscribe></app-subscribe>
  </section>
</main>
