<app-header></app-header>
<main>
  <section class="post-section">
    <div class="post-main-container">
      <div class="post-content">
        @if (loading) {
          <div class="loading-block">
            <p>Загрузка контента...</p>
          </div>
        } @else if (!postNotFound) {
          <ng-container>
            <app-post-detail [post]="post" [content]="getContentByLevel()"></app-post-detail>
          </ng-container>
        } @else {
          <ng-template>
            <div class="not-found-block">
              <h2>Post not found</h2>
              <p>The article you are looking for does not exist or was removed.</p>
              <button mat-raised-button color="primary" routerLink="/">Go to Home</button>
            </div>
          </ng-template>
        }
      </div>
      <aside class="post-sidebar">
        <div class="post-detail-function-block">
          <mat-form-field appearance="outline" class="level-select">
            <mat-label>Level</mat-label>
            <mat-select [(value)]="selectedLevel" (selectionChange)="onLevelChange($event.value)">
              @for (level of levels; track level) {
                <mat-option [value]="level">{{ level }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
        <h3 class="latest-news-title">Latest News</h3>
        <div class="latest-news-list">
          @for (news of latestNews; track news) {
            <app-post-card [post]="news"></app-post-card>
          }
        </div>
      </aside>
    </div>
  </section>
  <section class="subscribe-section">
    <app-subscribe></app-subscribe>
  </section>
</main>
<app-footer></app-footer>
